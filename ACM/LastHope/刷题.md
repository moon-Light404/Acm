#### <a href="https://www.acwing.com/activity/content/problem/content/5900/">括号序列</a>

<mark>栈</mark>  

给定一个括号字符串，求其中最长的合法括号序列长度和数量。

![image-20211219121305967](https://cdn.jsdelivr.net/gh/moon-Light404/my-picGo@master/img/202112191213394.png)

- ')' 只能与左边的的'(' 匹配，如果在字符串中间单独出现一个')'，那么两边的字符串就没有联系
- '('与右边的 ')' 进行匹配，遇到 ')' 就将 '(' 出栈

- 栈中存放的是括号序列括号对应的下标值，用于更新最大长度

```c++
#include<iostream>
#include<stack>
using namespace std;
const int N = 1000010;
char s[N];
stack<int> stk; // 存放序列括号对应的下标
int main() {
    scanf("%s", s);
    int resl = 0, resc = 1; // 合法序列的长度和数量
    
    for(int i = 0; s[i]; i++) {
        if(stk.size() && s[i] == ')' && s[stk.top()] == '(') stk.pop();
        else    stk.push(i);
        int r;
        // 不空说明左边有没用的右括号 ')'
        if(stk.size())  r = i - stk.top();
        else    r = i + 1;
        
        if(r > resl)    resl = r, resc = 1; // 更新最长的长度，且数量为1
        else if(r > 0 && r == resl)  resc += 1;
    }
    cout << resl << " " << resc << endl;
    return 0;
}
```

